# Note that this is NOT a relocatable package
%define ver     @SPEC_VERSION@
%define rel     0
%define prefix  /usr
%define name    @PACKAGE@

Name:        %{name}
Summary:     A Free Video Player.
Summary(ko): °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾î
Version:     %{ver}
Release:     %{rel}
Copyright:   GPL
Group:       Applications/Multimedia
Source:      http://xine.sourceforge.net/files/@PACKAGE@-@VERSION@.tar.gz
URL:         http://xine.sourceforge.net
Packager:    Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
Requires:    xine-lib >= %{ver}
BuildRoot:   /tmp/%{name}-root

@HAVE_AA_TRUE@%package aa
@HAVE_AA_TRUE@Summary:     XINE - Ascii Art player.
@HAVE_AA_TRUE@Group:       Applications/Multimedia
@HAVE_AA_TRUE@Requires:    xine-lib >= %{ver}, xine-lib-aa, aalib

%description
xine is a free gpl-licensed video player for unix-like systems.
We support mpeg-2 and mpeg-1 system (audio + video multiplexed) streams,
eventually mpeg-4 and other formats might be added.

xine plays the video and audio data of mpeg-2 videos and synchronizes
the playback of both. Depending on the properties of the mpeg stream,
playback will need more or less processor power, 100% frame rate
has been seen on a 400 MHz P II system.

%description -l fr
xine est un lecteur vidéo libre sous license GPL pour les systèmes de
type unix. Nous supportons les flux mpeg-2 et mpeg-1 (audio + vidéo 
multiplexés), éventuellement le mpeg-4 et d'autres formats peuvent
êtres ajoutés.

xine joue les données vidéo et audio de vidéo mpeg-2 et synchronise
la lecture des deux. En fonction des propriétes du flux mpeg,
la lecture aura besoin de plus ou moins de puissance du processeur, 
100% de restitution de trame a été vus sur un système PII 400MHz.

%description -l ko
xine ´Â GPL¶óÀÌ¼±½º¸¦ µû¸£´Â UNIX¿ë °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾îÀÔ´Ï´Ù. ÀÌ
ÇÃ·¹ÀÌ¾î´Â mpeg-2 ¿Í mpeg 1 ½ºÆ®¸²À» Áö¿øÇÏ¸ç, ÇöÀç´Â Áö¿øÇÏÁö
¾ÊÁö¸¸ ³ªÁß¿¡´Â mpeg-4 ¿Í ´Ù¸¥ Çü½ÄÀÇ µ¿¿µ»óµµ Áö¿øÇÒ ¿¹Á¤ÀÔ´Ï´Ù.

%description -l pt
O xine é um leitor de vídeo livre ao abrigo da GPL para sistemas tipo
Unix. Lê ficheiros MPEG-2 e MPEG-1, bem como AVIs que contenham
MS MPEG-4 / OpenDivX Video.

O xine lê o conteúdo vídeo e áudio e sincroniza-os em tempo-real. As
necessidades de processador dependem das propriedades de cada ficheiro.
Em princípio, um sistema equipado com um Pentium-II a 400 MHz consegue
ler qualquer vídeo com máximo desempenho.

@HAVE_AA_TRUE@%description aa
@HAVE_AA_TRUE@Video player using Ascii Art library.

%prep
%setup -n @TAR_NAME@

%build
cp ./configure ./configure.orig
sed 's/xine_skin_dir=/xine_skin_dir=$RPM_BUILD_ROOT/' configure.orig > ./configure

./configure --prefix=%{prefix}
make

%install
if [ -d $RPM_BUILD_ROOT ]; then rm -rf $RPM_BUILD_ROOT; fi
#mkdir -p $RPM_BUILD_ROOT/usr/include/X11/pixmaps
make install-strip prefix=$RPM_BUILD_ROOT%{prefix}
#cp doc/*.xpm $RPM_BUILD_ROOT/usr/include/X11/pixmaps

%post
#/sbin/ldconfig
if test -d @XINE_SKINDIR@/default; then rm -rf @XINE_SKINDIR@/default && ln -s @XINE_SKINDIR@/xinetic @XINE_SKINDIR@/default; fi

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
# binaries
%{prefix}/bin/xine
%{prefix}/share/idl/xine.idl
# skins
@XINE_SKINDIR@/lcd/*
@XINE_SKINDIR@/metal/*
@XINE_SKINDIR@/pitt/*
@XINE_SKINDIR@/xinetic/*
# documentation
%{prefix}/man/fr/man1/xine.1*
%{prefix}/man/man1/xine.1*
%{prefix}/share/doc/xine-ui/FAQ
%{prefix}/share/doc/xine-ui/FAQ_es
%{prefix}/share/doc/xine-ui/FAQ_it
%{prefix}/share/doc/xine-ui/FAQ_fr
%{prefix}/share/doc/xine-ui/README.freebsd
%{prefix}/share/doc/xine-ui/README.irix
%{prefix}/share/doc/xine-ui/README.solaris
%{prefix}/share/doc/xine-ui/README.syncfb
%{prefix}/share/doc/xine-ui/bug_report_form

@HAVE_AA_TRUE@%files aa
@HAVE_AA_TRUE@%defattr(-,root,root)
@HAVE_AA_TRUE@%{prefix}/bin/aaxine
@HAVE_AA_TRUE@%{prefix}/man/man1/aaxine.1*

%changelog
* Sun Sep 16 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Merge patch from José Carlos Monteiro <jcm@netcabo.pt>:
  - Filelist and other minor updates,
  - Fixed some SuSE compatibility issues,
  - Added Portuguese summary.
* Sun Sep 16 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Add missing files.
* Thu Jul 26 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Made AA as separate package.
* Thu Jul 26 2001 Matthias Dahl <matthew2k@web.de>
- updated filelist.
* Tue Jul 03 2001 Matthias Dahl <matthew2k@web.de>
- fixed the "no-skins-in-final-RPM-package" problem (nice explanation *grin*)
* Sun Jun 10 2001 Matthias Dahl <matthew2k@web.de>
- updated filelist and the requirements field
- removed /sbin/ldconfig as post install script
* Thu Mar 28 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- add korean summary, patch from Louis JANG <louis@ns.mizi.com>
* Thu Jan 11 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- patch from Sung-Hyun Nam <namsh@lgic.co.kr> applied.
* Fri Oct 17 2000 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- first spec file.
